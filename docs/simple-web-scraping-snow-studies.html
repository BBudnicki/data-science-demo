<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Simple web scraping Snow Studies | Data Science Demo</title>
  <meta name="description" content="This is the final data science project for the Introduction to Data Science Course ESS 580A7." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Simple web scraping Snow Studies | Data Science Demo" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the final data science project for the Introduction to Data Science Course ESS 580A7." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Simple web scraping Snow Studies | Data Science Demo" />
  
  <meta name="twitter:description" content="This is the final data science project for the Introduction to Data Science Course ESS 580A7." />
  

<meta name="author" content="Brandon Budnicki" />


<meta name="date" content="2022-03-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="hayman-fire-google-earth-engine.html"/>
<link rel="next" href="lagos-spatial-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.0/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/lfx-sidebyside-1.0.0/lfx-side-by-side.js"></script>
<script src="libs/lfx-sidebyside-1.0.0/lfx-side-by-side-bindings.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science Demo</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction">Introduction<span></span></a>
<ul>
<li><a href="index.html#view-github-code">View GitHub Code<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="poudre-river-interactive-graph.html"><a href="poudre-river-interactive-graph.html"><i class="fa fa-check"></i><b>1</b> Poudre River Interactive Graph<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="poudre-river-interactive-graph.html"><a href="poudre-river-interactive-graph.html#methods"><i class="fa fa-check"></i><b>1.1</b> Methods<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="poudre-river-interactive-graph.html"><a href="poudre-river-interactive-graph.html#sitedescription"><i class="fa fa-check"></i><b>1.2</b> SiteDescription<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="poudre-river-interactive-graph.html"><a href="poudre-river-interactive-graph.html#data-acquisition"><i class="fa fa-check"></i><b>1.3</b> Data Acquisition<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="poudre-river-interactive-graph.html"><a href="poudre-river-interactive-graph.html#interactive-plot"><i class="fa fa-check"></i><b>1.4</b> Interactive Plot<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="poudre-river-interactive-graph.html"><a href="poudre-river-interactive-graph.html#cameron-peak-fire"><i class="fa fa-check"></i><b>1.5</b> Cameron Peak Fire<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="hayman-fire-google-earth-engine.html"><a href="hayman-fire-google-earth-engine.html"><i class="fa fa-check"></i><b>2</b> Hayman Fire Google Earth Engine<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="hayman-fire-google-earth-engine.html"><a href="hayman-fire-google-earth-engine.html#ndvi-over-time"><i class="fa fa-check"></i><b>2.1</b> NDVI over time<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="hayman-fire-google-earth-engine.html"><a href="hayman-fire-google-earth-engine.html#correlation-between-ndvi-ndmi"><i class="fa fa-check"></i><b>2.2</b> Correlation between NDVI &amp; NDMI<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="hayman-fire-google-earth-engine.html"><a href="hayman-fire-google-earth-engine.html#snow-and-vegitation"><i class="fa fa-check"></i><b>2.3</b> Snow and Vegitation<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="hayman-fire-google-earth-engine.html"><a href="hayman-fire-google-earth-engine.html#greenest-month"><i class="fa fa-check"></i><b>2.4</b> Greenest Month<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="hayman-fire-google-earth-engine.html"><a href="hayman-fire-google-earth-engine.html#snowiest-month"><i class="fa fa-check"></i><b>2.5</b> Snowiest Month<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html"><i class="fa fa-check"></i><b>3</b> Simple web scraping Snow Studies<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#scraping-data"><i class="fa fa-check"></i><b>3.1</b> Scraping data<span></span></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#download-the-data."><i class="fa fa-check"></i><b>3.1.1</b> Download the data.<span></span></a></li>
<li class="chapter" data-level="3.1.2" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#download-data-in-a-map"><i class="fa fa-check"></i><b>3.1.2</b> Download data in a map<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#data-read-in"><i class="fa fa-check"></i><b>3.2</b> Data read-in<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#plot-snow-data"><i class="fa fa-check"></i><b>3.3</b> Plot snow data<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#extract-the-meteorological-data-urls."><i class="fa fa-check"></i><b>3.4</b> Extract the meteorological data URLs.<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#download-the-meteorological-data."><i class="fa fa-check"></i><b>3.5</b> Download the meteorological data.<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#read-data"><i class="fa fa-check"></i><b>3.6</b> Read data<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#use-the-map-function"><i class="fa fa-check"></i><b>3.7</b> Use the <code>map</code> function<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#mean-air-temperture-by-year"><i class="fa fa-check"></i><b>3.8</b> Mean Air Temperture by Year<span></span></a></li>
<li class="chapter" data-level="3.9" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#air-temperture-error-codes"><i class="fa fa-check"></i><b>3.9</b> Air Temperture Error Codes<span></span></a></li>
<li class="chapter" data-level="3.10" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#mean-air-temperture-multiple-years"><i class="fa fa-check"></i><b>3.10</b> Mean Air Temperture Multiple Years<span></span></a></li>
<li class="chapter" data-level="3.11" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#average-daily-percipitation"><i class="fa fa-check"></i><b>3.11</b> Average Daily Percipitation<span></span></a></li>
<li class="chapter" data-level="3.12" data-path="simple-web-scraping-snow-studies.html"><a href="simple-web-scraping-snow-studies.html#yearly-plots-of-percepitation"><i class="fa fa-check"></i><b>3.12</b> Yearly Plots of Percepitation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html"><i class="fa fa-check"></i><b>4</b> LAGOS Spatial Analysis<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#loading-in-data"><i class="fa fa-check"></i><b>4.1</b> Loading in data<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#first-download-and-then-specifically-grab-the-locus-or-site-lat-longs"><i class="fa fa-check"></i><b>4.1.1</b> First download and then specifically grab the locus (or site lat longs)<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#convert-to-spatial-data"><i class="fa fa-check"></i><b>4.1.2</b> Convert to spatial data<span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#subset-to-only-minnesota"><i class="fa fa-check"></i><b>4.1.3</b> Subset to only Minnesota<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#map-of-iowa-illinois"><i class="fa fa-check"></i><b>4.2</b> Map of Iowa &amp; Illinois<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#subset-lagos-data"><i class="fa fa-check"></i><b>4.3</b> Subset LAGOS data<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#distribution-of-lake-size-in-iowa-vs.-minnesota"><i class="fa fa-check"></i><b>4.4</b> Distribution of lake size in Iowa vs. Minnesota<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#lakes-in-iowa-illinois-by-lake-area"><i class="fa fa-check"></i><b>4.5</b> Lakes in Iowa &amp; Illinois by lake area<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="lagos-spatial-analysis.html"><a href="lagos-spatial-analysis.html#future-investigation"><i class="fa fa-check"></i><b>4.6</b> Future investigation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html"><i class="fa fa-check"></i><b>5</b> LAGOSNE Water Quality Analysis<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#loading-in-data-1"><i class="fa fa-check"></i><b>5.1</b> Loading in data<span></span></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#download-and-identify-the-site-locuslatiutde-longitude"><i class="fa fa-check"></i><b>5.1.1</b> Download and identify the site locus(latiutde longitude)<span></span></a></li>
<li class="chapter" data-level="5.1.2" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#filter-sites-with-at-least-200-observations"><i class="fa fa-check"></i><b>5.1.2</b> Filter sites with at least 200 observations<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#mean-chlorophyll-a-map"><i class="fa fa-check"></i><b>5.2</b> Mean Chlorophyll A map<span></span></a></li>
<li class="chapter" data-level="5.3" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#correlation-between-secchi-disk-depth-and-chlorophyll-a"><i class="fa fa-check"></i><b>5.3</b> Correlation between Secchi Disk Depth and Chlorophyll A<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#which-states-have-the-most-data"><i class="fa fa-check"></i><b>5.4</b> Which states have the most data?<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#number-of-observations-for-all-lakes"><i class="fa fa-check"></i><b>5.4.1</b> Number of observations for all lakes<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#number-of-observations-for-lakes-with-more-than-200-observations"><i class="fa fa-check"></i><b>5.4.2</b> Number of observations for lakes with more than 200 observations<span></span></a></li>
<li class="chapter" data-level="5.4.3" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#spatial-pattern-in-secchi-disk-depth-for-lakes-with-at-least-200-observations"><i class="fa fa-check"></i><b>5.4.3</b> Spatial pattern in Secchi disk depth for lakes with at least 200 observations<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#why-200-observations"><i class="fa fa-check"></i><b>5.5</b> Why 200 observations<span></span></a></li>
<li class="chapter" data-level="5.6" data-path="lagosne-water-quality-analysis.html"><a href="lagosne-water-quality-analysis.html#observations-per-lake"><i class="fa fa-check"></i><b>5.6</b> 25 observations per lake<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html"><i class="fa fa-check"></i><b>6</b> Weather and Corn Yield Regressions<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#setup"><i class="fa fa-check"></i><b>6.1</b> Setup<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#load-the-prism-daily-maximum-temperatures"><i class="fa fa-check"></i><b>6.1.1</b> Load the PRISM daily maximum temperatures<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#temperature-trends"><i class="fa fa-check"></i><b>6.1.2</b> Temperature trends<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#assignment"><i class="fa fa-check"></i><b>6.2</b> Assignment<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-1"><i class="fa fa-check"></i><b>6.2.1</b> Question 1<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-2-time-series"><i class="fa fa-check"></i><b>6.2.2</b> Question 2 – Time Series<span></span></a></li>
<li class="chapter" data-level="6.2.3" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-3-cross-section"><i class="fa fa-check"></i><b>6.2.3</b> Question 3 – Cross-Section<span></span></a></li>
<li class="chapter" data-level="6.2.4" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-4-panel"><i class="fa fa-check"></i><b>6.2.4</b> Question 4 – Panel<span></span></a></li>
<li class="chapter" data-level="6.2.5" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-5-soybeans"><i class="fa fa-check"></i><b>6.2.5</b> Question 5 – Soybeans<span></span></a></li>
<li class="chapter" data-level="6.2.6" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-6-bonus"><i class="fa fa-check"></i><b>6.2.6</b> Question 6 Bonus<span></span></a></li>
<li class="chapter" data-level="6.2.7" data-path="weather-and-corn-yield-regressions.html"><a href="weather-and-corn-yield-regressions.html#question-7-bonus"><i class="fa fa-check"></i><b>6.2.7</b> Question 7 Bonus<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/BBudnicki/data-science-demo">View GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Demo</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simple-web-scraping-snow-studies" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Simple web scraping Snow Studies<a href="simple-web-scraping-snow-studies.html#simple-web-scraping-snow-studies" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>R can read html using either rvest, xml, or xml2 packages. Here we are going to navigate to the Center for Snow and Avalanche Studies <a href="https://snowstudies.org/archived-data/">Website</a> and read a table in. This table contains links to data we want to programmatically download for three sites. We don’t know much about these sites, but they contain incredibly rich snow, temperature, and precipitation data.</p>
<div id="scraping-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Scraping data<a href="simple-web-scraping-snow-studies.html#scraping-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Read the snow studies archive page to identify data for download.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="simple-web-scraping-snow-studies.html#cb3-1" aria-hidden="true" tabindex="-1"></a>site_url <span class="ot">&lt;-</span> <span class="st">&#39;https://snowstudies.org/archived-data/&#39;</span></span>
<span id="cb3-2"><a href="simple-web-scraping-snow-studies.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="simple-web-scraping-snow-studies.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Read the web url</span></span>
<span id="cb3-4"><a href="simple-web-scraping-snow-studies.html#cb3-4" aria-hidden="true" tabindex="-1"></a>webpage <span class="ot">&lt;-</span> <span class="fu">read_html</span>(site_url)</span>
<span id="cb3-5"><a href="simple-web-scraping-snow-studies.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="simple-web-scraping-snow-studies.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract only weblinks and then the URLs!</span></span>
<span id="cb3-7"><a href="simple-web-scraping-snow-studies.html#cb3-7" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="simple-web-scraping-snow-studies.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&#39;a&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="simple-web-scraping-snow-studies.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">grepl</span>(<span class="st">&#39;24hr&#39;</span>,.)] <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="simple-web-scraping-snow-studies.html#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)</span></code></pre></div>
<div id="download-the-data." class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Download the data.<a href="simple-web-scraping-snow-studies.html#download-the-data." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="simple-web-scraping-snow-studies.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Grab only the name of the file by splitting out on forward slashes</span></span>
<span id="cb4-2"><a href="simple-web-scraping-snow-studies.html#cb4-2" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(links,<span class="st">&#39;/&#39;</span>,<span class="dv">8</span>)</span>
<span id="cb4-3"><a href="simple-web-scraping-snow-studies.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="simple-web-scraping-snow-studies.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Keep only the 8th column</span></span>
<span id="cb4-5"><a href="simple-web-scraping-snow-studies.html#cb4-5" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> splits[,<span class="dv">8</span>] </span>
<span id="cb4-6"><a href="simple-web-scraping-snow-studies.html#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="simple-web-scraping-snow-studies.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#generate a file list for where the data goes</span></span>
<span id="cb4-8"><a href="simple-web-scraping-snow-studies.html#cb4-8" aria-hidden="true" tabindex="-1"></a>datapath <span class="ot">=</span> <span class="st">&#39;data/snow/&#39;</span></span>
<span id="cb4-9"><a href="simple-web-scraping-snow-studies.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(datapath)</span>
<span id="cb4-10"><a href="simple-web-scraping-snow-studies.html#cb4-10" aria-hidden="true" tabindex="-1"></a>file_names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(datapath,dataset)</span>
<span id="cb4-11"><a href="simple-web-scraping-snow-studies.html#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="simple-web-scraping-snow-studies.html#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb4-13"><a href="simple-web-scraping-snow-studies.html#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(links[i],<span class="at">destfile=</span>file_names[i])</span>
<span id="cb4-14"><a href="simple-web-scraping-snow-studies.html#cb4-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-15"><a href="simple-web-scraping-snow-studies.html#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="simple-web-scraping-snow-studies.html#cb4-16" aria-hidden="true" tabindex="-1"></a>downloaded <span class="ot">&lt;-</span> <span class="fu">file.exists</span>(file_names)</span>
<span id="cb4-17"><a href="simple-web-scraping-snow-studies.html#cb4-17" aria-hidden="true" tabindex="-1"></a>evaluate <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">all</span>(downloaded)</span></code></pre></div>
</div>
<div id="download-data-in-a-map" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Download data in a map<a href="simple-web-scraping-snow-studies.html#download-data-in-a-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="simple-web-scraping-snow-studies.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Map version of the same for loop (downloading 3 files)</span></span>
<span id="cb5-2"><a href="simple-web-scraping-snow-studies.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(evaluate <span class="sc">==</span> T){</span>
<span id="cb5-3"><a href="simple-web-scraping-snow-studies.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map2</span>(links[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],file_names[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],download.file)</span>
<span id="cb5-4"><a href="simple-web-scraping-snow-studies.html#cb5-4" aria-hidden="true" tabindex="-1"></a>}<span class="cf">else</span>{<span class="fu">print</span>(<span class="st">&#39;data already downloaded&#39;</span>)}</span></code></pre></div>
</div>
</div>
<div id="data-read-in" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data read-in<a href="simple-web-scraping-snow-studies.html#data-read-in" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="simple-web-scraping-snow-studies.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pattern matching to only keep certain files</span></span>
<span id="cb6-2"><a href="simple-web-scraping-snow-studies.html#cb6-2" aria-hidden="true" tabindex="-1"></a>snow_files <span class="ot">&lt;-</span> file_names <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="simple-web-scraping-snow-studies.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&#39;SG_24&#39;</span>,.)] <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="simple-web-scraping-snow-studies.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&#39;PTSP&#39;</span>,.)]</span>
<span id="cb6-5"><a href="simple-web-scraping-snow-studies.html#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="simple-web-scraping-snow-studies.html#cb6-6" aria-hidden="true" tabindex="-1"></a>our_snow_reader <span class="ot">&lt;-</span> <span class="cf">function</span>(file){</span>
<span id="cb6-7"><a href="simple-web-scraping-snow-studies.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">=</span> <span class="fu">str_split_fixed</span>(file,<span class="st">&#39;/&#39;</span>,<span class="dv">2</span>)[,<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="simple-web-scraping-snow-studies.html#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gsub</span>(<span class="st">&#39;_24hr.csv&#39;</span>,<span class="st">&#39;&#39;</span>,.)</span>
<span id="cb6-9"><a href="simple-web-scraping-snow-studies.html#cb6-9" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="simple-web-scraping-snow-studies.html#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Year,DOY,Sno_Height_M) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="simple-web-scraping-snow-studies.html#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">site =</span> name)</span>
<span id="cb6-12"><a href="simple-web-scraping-snow-studies.html#cb6-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-13"><a href="simple-web-scraping-snow-studies.html#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="simple-web-scraping-snow-studies.html#cb6-14" aria-hidden="true" tabindex="-1"></a>snow_data_full <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(snow_files,our_snow_reader)</span></code></pre></div>
<pre><code>## Rows: 6211 Columns: 52
## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## dbl (52): ArrayID, Year, DOY, Hour, LoAir_Min_C, LoAir_Min_Time, LoAir_Max_C...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Rows: 6575 Columns: 48
## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## dbl (48): ArrayID, Year, DOY, Hour, LoAir_Min_C, LoAir_Min_Time, LoAir_Max_C...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div id="plot-snow-data" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Plot snow data<a href="simple-web-scraping-snow-studies.html#plot-snow-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>##       Year           DOY         Sno_Height_M        site          
##  Min.   :2003   Min.   :  1.0   Min.   :-3.523   Length:12786      
##  1st Qu.:2008   1st Qu.: 92.0   1st Qu.: 0.350   Class :character  
##  Median :2012   Median :183.0   Median : 0.978   Mode  :character  
##  Mean   :2012   Mean   :183.1   Mean   : 0.981                     
##  3rd Qu.:2016   3rd Qu.:274.0   3rd Qu.: 1.520                     
##  Max.   :2021   Max.   :366.0   Max.   : 2.905                     
##                                 NA&#39;s   :4554</code></pre>
<p><img src="_data-science-demo_files/figure-html/SnowPlot-1.png" width="672" /></p>
</div>
<div id="extract-the-meteorological-data-urls." class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Extract the meteorological data URLs.<a href="simple-web-scraping-snow-studies.html#extract-the-meteorological-data-urls." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here we want you to use the <code>rvest</code> package to get the URLs for the <code>SASP forcing</code> and <code>SBSP_forcing</code> meteorological data sets.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="simple-web-scraping-snow-studies.html#cb9-1" aria-hidden="true" tabindex="-1"></a>q1_links <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="simple-web-scraping-snow-studies.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&#39;a&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="simple-web-scraping-snow-studies.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">grepl</span>(<span class="st">&#39;forcing&#39;</span>,.)] <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="simple-web-scraping-snow-studies.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)</span></code></pre></div>
</div>
<div id="download-the-meteorological-data." class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Download the meteorological data.<a href="simple-web-scraping-snow-studies.html#download-the-meteorological-data." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use the <code>download_file</code> and <code>str_split_fixed</code> commands to download the data and save it in your data folder. You can use a for loop or a map function.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="simple-web-scraping-snow-studies.html#cb10-1" aria-hidden="true" tabindex="-1"></a>q2_splits <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(q1_links,<span class="st">&#39;/&#39;</span>,<span class="dv">8</span>)</span>
<span id="cb10-2"><a href="simple-web-scraping-snow-studies.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Keep only the 8th column</span></span>
<span id="cb10-3"><a href="simple-web-scraping-snow-studies.html#cb10-3" aria-hidden="true" tabindex="-1"></a>q2_dataset <span class="ot">&lt;-</span> q2_splits[,<span class="dv">8</span>] </span>
<span id="cb10-4"><a href="simple-web-scraping-snow-studies.html#cb10-4" aria-hidden="true" tabindex="-1"></a>q2_file_names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(datapath,q2_dataset)</span>
<span id="cb10-5"><a href="simple-web-scraping-snow-studies.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="simple-web-scraping-snow-studies.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb10-7"><a href="simple-web-scraping-snow-studies.html#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(q1_links[i],<span class="at">destfile=</span>q2_file_names[i])</span>
<span id="cb10-8"><a href="simple-web-scraping-snow-studies.html#cb10-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-9"><a href="simple-web-scraping-snow-studies.html#cb10-9" aria-hidden="true" tabindex="-1"></a>q2_downloaded <span class="ot">&lt;-</span> <span class="fu">file.exists</span>(file_names)</span>
<span id="cb10-10"><a href="simple-web-scraping-snow-studies.html#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="simple-web-scraping-snow-studies.html#cb10-11" aria-hidden="true" tabindex="-1"></a>evaluate <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">all</span>(q2_downloaded)</span></code></pre></div>
</div>
<div id="read-data" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Read data<a href="simple-web-scraping-snow-studies.html#read-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Write a custom function to read in the data and append a site column to the data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="simple-web-scraping-snow-studies.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this code grabs the variable names from the metadata pdf file</span></span>
<span id="cb11-2"><a href="simple-web-scraping-snow-studies.html#cb11-2" aria-hidden="true" tabindex="-1"></a>q3_headers <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">&#39;https://snowstudies.org/wp-content/uploads/2022/02/Serially-Complete-Metadata-text08.pdf&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="simple-web-scraping-snow-studies.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_lines</span>(.) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="simple-web-scraping-snow-studies.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">trimws</span>(.) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="simple-web-scraping-snow-studies.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_fixed</span>(.,<span class="st">&#39;</span><span class="sc">\\</span><span class="st">.&#39;</span>,<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="simple-web-scraping-snow-studies.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  .[,<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="simple-web-scraping-snow-studies.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">1</span><span class="sc">:</span><span class="dv">26</span>] <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="simple-web-scraping-snow-studies.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trim</span>(<span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span>
<span id="cb11-9"><a href="simple-web-scraping-snow-studies.html#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="simple-web-scraping-snow-studies.html#cb11-10" aria-hidden="true" tabindex="-1"></a>q3_reader <span class="ot">&lt;-</span> <span class="cf">function</span>(file){</span>
<span id="cb11-11"><a href="simple-web-scraping-snow-studies.html#cb11-11" aria-hidden="true" tabindex="-1"></a>  fileName <span class="ot">=</span> <span class="fu">str_split_fixed</span>(file,<span class="st">&#39;/&#39;</span>,<span class="dv">2</span>)[,<span class="dv">2</span>]</span>
<span id="cb11-12"><a href="simple-web-scraping-snow-studies.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  nameRight <span class="ot">=</span>  <span class="fu">str_split_fixed</span>(fileName,<span class="st">&#39;_&#39;</span>,<span class="dv">2</span>)[,<span class="dv">2</span>] </span>
<span id="cb11-13"><a href="simple-web-scraping-snow-studies.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  nameLeft <span class="ot">=</span>  <span class="fu">str_split_fixed</span>(nameRight,<span class="st">&#39;_&#39;</span>,<span class="dv">2</span>)[,<span class="dv">1</span>] </span>
<span id="cb11-14"><a href="simple-web-scraping-snow-studies.html#cb11-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-15"><a href="simple-web-scraping-snow-studies.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(file, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span><span class="st">&quot;&quot;</span>,<span class="at">col.names =</span> q3_headers,<span class="at">skip =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-16"><a href="simple-web-scraping-snow-studies.html#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">site =</span> nameLeft) <span class="sc">%&gt;%</span></span>
<span id="cb11-17"><a href="simple-web-scraping-snow-studies.html#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span>  <span class="fu">as.Date</span>(<span class="fu">paste</span>(year, month, day, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="simple-web-scraping-snow-studies.html#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">air_temp_k =</span> air.temp..K.) <span class="sc">%&gt;%</span></span>
<span id="cb11-19"><a href="simple-web-scraping-snow-studies.html#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">air_temp_c =</span> <span class="fu">kelvin.to.celsius</span>(air.temp..K.))</span>
<span id="cb11-20"><a href="simple-web-scraping-snow-studies.html#cb11-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="use-the-map-function" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Use the <code>map</code> function<a href="simple-web-scraping-snow-studies.html#use-the-map-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Read in both meteorological files. Display a summary of your tibble.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="simple-web-scraping-snow-studies.html#cb12-1" aria-hidden="true" tabindex="-1"></a>q4_full <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(q2_file_names,q3_reader)</span>
<span id="cb12-2"><a href="simple-web-scraping-snow-studies.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="simple-web-scraping-snow-studies.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(q4_full[<span class="st">&#39;air_temp_k&#39;</span>])</span></code></pre></div>
<pre><code>##    air_temp_k   
##  Min.   :242.1  
##  1st Qu.:265.8  
##  Median :272.6  
##  Mean   :272.6  
##  3rd Qu.:279.7  
##  Max.   :295.8</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="simple-web-scraping-snow-studies.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(q4_full[<span class="st">&#39;precip..kg.m.2.s.1.&#39;</span>])</span></code></pre></div>
<pre><code>##  precip..kg.m.2.s.1.
##  Min.   :0.000e+00  
##  1st Qu.:0.000e+00  
##  Median :0.000e+00  
##  Mean   :3.838e-05  
##  3rd Qu.:0.000e+00  
##  Max.   :6.111e-03</code></pre>
</div>
<div id="mean-air-temperture-by-year" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> Mean Air Temperture by Year<a href="simple-web-scraping-snow-studies.html#mean-air-temperture-by-year" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Make a line plot of mean temp by year by site (using the <code>air temp [K]</code> variable). Is there anything suspicious in the plot? Adjust your filtering if needed.</p>
<div class="figure"><span style="display:block;" id="fig:TempertureYear"></span>
<img src="_data-science-demo_files/figure-html/TempertureYear-1.png" alt="Mean Air Temperture by Year" width="672" />
<p class="caption">
Figure 3.1: Mean Air Temperture by Year
</p>
</div>
<p>Figure <a href="simple-web-scraping-snow-studies.html#fig:TempertureYear">3.1</a> shows the annual mean air temperature for both sites in a given year. 2003 &amp; 2004 have unusually low air temperatures.</p>
<div class="figure"><span style="display:block;" id="fig:SnowTempertureYearBox"></span>
<img src="_data-science-demo_files/figure-html/SnowTempertureYearBox-1.png" alt="Boxplot Air Temperture by Year" width="672" />
<p class="caption">
Figure 3.2: Boxplot Air Temperture by Year
</p>
</div>
<p>In figure <a href="simple-web-scraping-snow-studies.html#fig:SnowTempertureYearBox">3.2</a> we see the air temperature in 2004 was only slightly lower, with the interquartile range being roughly the same. On the other hand 2003 had a significantly narrower interquartile range. At the scale of 1 year it is difficult to tell how much the 2003 data is skewed by collecting part of the year, if it was unusually cold that year, or if there was an issue with the instrumentation.</p>
<div class="figure"><span style="display:block;" id="fig:SnowTempMonth"></span>
<img src="_data-science-demo_files/figure-html/SnowTempMonth-1.png" alt="Mean air temperture by month" width="672" />
<p class="caption">
Figure 3.3: Mean air temperture by month
</p>
</div>
<p>In <a href="simple-web-scraping-snow-studies.html#fig:SnowTempMonth">3.3</a> we see that it was unusually cold at both sites for the 2003 &amp; 2004 data. Much more for the SBSP. Due to only collecting data for the end of the year, 2003 data has a lower mean temperature as it does not include the summer months. Looking at the header file <a href="https://snowstudies.org/wp-content/uploads/2022/02/Serially-Complete-Metadata-text08.pdf">Serially-Complete-Metadata-text08.pdf</a> we can see that they do include QC Code columns, but those values do not appear in the data set itself. The table of code values indicate some of the data has the followings errors, but the dates are not specified.</p>
</div>
<div id="air-temperture-error-codes" class="section level2 hasAnchor" number="3.9">
<h2><span class="header-section-number">3.9</span> Air Temperture Error Codes<a href="simple-web-scraping-snow-studies.html#air-temperture-error-codes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>5001: missing data: use data from upper measurement location at same site (regression fill)</li>
<li>5003: missing data: use data from paired site (regression fill)</li>
<li>6000: before desired time period</li>
<li>6001: missing data: use data from upper measurement location at same site (regression fill)</li>
<li>6002: missing data: use data from paired site (regression fill)</li>
<li>6009: missing data: assume RH is 50%.</li>
</ul>
</div>
<div id="mean-air-temperture-multiple-years" class="section level2 hasAnchor" number="3.10">
<h2><span class="header-section-number">3.10</span> Mean Air Temperture Multiple Years<a href="simple-web-scraping-snow-studies.html#mean-air-temperture-multiple-years" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Write a function that makes line plots of monthly average temperature at each site for a given year. Use a for loop to make these plots for 2005 to 2010. Are monthly average temperatures at the Senator Beck Study Plot ever warmer than the Snow Angel Study Plot?
Hint: <a href="https://ggplot2.tidyverse.org/reference/print.ggplot.html">https://ggplot2.tidyverse.org/reference/print.ggplot.html</a></p>
<div class="figure"><span style="display:block;" id="fig:SnowTempYearMulti-1"></span>
<img src="_data-science-demo_files/figure-html/SnowTempYearMulti-1.png" alt="Line Chart Air Temperture by Month 2005-2010" width="384" />
<p class="caption">
Figure 3.4: Line Chart Air Temperture by Month 2005-2010
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:SnowTempYearMulti-2"></span>
<img src="_data-science-demo_files/figure-html/SnowTempYearMulti-2.png" alt="Line Chart Air Temperture by Month 2005-2010" width="384" />
<p class="caption">
Figure 3.5: Line Chart Air Temperture by Month 2005-2010
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:SnowTempYearMulti-3"></span>
<img src="_data-science-demo_files/figure-html/SnowTempYearMulti-3.png" alt="Line Chart Air Temperture by Month 2005-2010" width="384" />
<p class="caption">
Figure 3.6: Line Chart Air Temperture by Month 2005-2010
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:SnowTempYearMulti-4"></span>
<img src="_data-science-demo_files/figure-html/SnowTempYearMulti-4.png" alt="Line Chart Air Temperture by Month 2005-2010" width="384" />
<p class="caption">
Figure 3.7: Line Chart Air Temperture by Month 2005-2010
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:SnowTempYearMulti-5"></span>
<img src="_data-science-demo_files/figure-html/SnowTempYearMulti-5.png" alt="Line Chart Air Temperture by Month 2005-2010" width="384" />
<p class="caption">
Figure 3.8: Line Chart Air Temperture by Month 2005-2010
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:SnowTempYearMulti-6"></span>
<img src="_data-science-demo_files/figure-html/SnowTempYearMulti-6.png" alt="Line Chart Air Temperture by Month 2005-2010" width="384" />
<p class="caption">
Figure 3.9: Line Chart Air Temperture by Month 2005-2010
</p>
</div>
<p>Monthly average temperatures at the Snow Angel Study Plot are consistently warmer than the Senator Beck Study Plot. At no point from 2005 to 2010 was the Snow Angel Study Plot mean monthly temperature lower than the Senator Beck Study Plot.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-8-1"></span>
<img src="_data-science-demo_files/figure-html/unnamed-chunk-8-1.png" alt="Line Chart Air Temperture by Month" width="672" />
<p class="caption">
Figure 3.10: Line Chart Air Temperture by Month
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-8-2"></span>
<img src="_data-science-demo_files/figure-html/unnamed-chunk-8-2.png" alt="Line Chart Air Temperture by Month" width="672" />
<p class="caption">
Figure 3.11: Line Chart Air Temperture by Month
</p>
</div>
</div>
<div id="average-daily-percipitation" class="section level2 hasAnchor" number="3.11">
<h2><span class="header-section-number">3.11</span> Average Daily Percipitation<a href="simple-web-scraping-snow-studies.html#average-daily-percipitation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Make a plot of average daily precipitation by day of year (averaged across all available years). Color each site.</p>
<div class="figure"><span style="display:block;" id="fig:PercipitationDay"></span>
<img src="_data-science-demo_files/figure-html/PercipitationDay-1.png" alt="Average daily percipitation" width="672" />
<p class="caption">
Figure 3.12: Average daily percipitation
</p>
</div>
<p>The number of years is not great enough to handle daily precipitation well. Trying monthly.</p>
<div class="figure"><span style="display:block;" id="fig:PercipitationMonth"></span>
<img src="_data-science-demo_files/figure-html/PercipitationMonth-1.png" alt="Average daily percipitation in a given month" width="672" />
<p class="caption">
Figure 3.13: Average daily percipitation in a given month
</p>
</div>
<p>That was not helpful for finding a pattern. Also note: the daily precipitation is identical at both sites.</p>
</div>
<div id="yearly-plots-of-percepitation" class="section level2 hasAnchor" number="3.12">
<h2><span class="header-section-number">3.12</span> Yearly Plots of Percepitation<a href="simple-web-scraping-snow-studies.html#yearly-plots-of-percepitation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use a function and for loop to create yearly plots of precipitation by day of year. Color each site.</p>
<div class="figure"><span style="display:block;" id="fig:PercipitationYearly"></span>
<img src="_data-science-demo_files/figure-html/PercipitationYearly-1.png" alt="Percipitation By Month" width="672" />
<p class="caption">
Figure 3.14: Percipitation By Month
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hayman-fire-google-earth-engine.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lagos-spatial-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/BBudnicki/data-science-demo/edit/master/3-hw-snow.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
